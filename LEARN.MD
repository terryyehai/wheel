# 抽抽樂大轉盤：專案學習隨筆 🎡

歡迎來到這個充滿驚喜與程式碼美學的專案！這不僅僅是一個抽獎工具，更是一個展示現代網頁技術與資深架構思維的實驗場。

## 🚀 專案全景圖 (Project Overview)

「抽抽樂大轉盤」是一個多功能的抽獎服務。我們將傳統的單一轉盤擴充成立一個擁有 **六種不同互動模式** 的平台。無論是想體驗拉斯維加斯的輪盤、日本神群的求籤，還是新春佳節的紅包，這裡一應俱全。

### 技術棧重點
- **核心框架**: React (Vite)
- **視覺特效**: CSS Glassmorphism (毛玻璃)、Canvas 像素操作、SVG 動畫。
- **音效系統**: 自定義 Web Audio 封裝，支援音效與觸覺回饋 (Haptics)。
- **國際化**: 基於 Context API 的輕量級 i18n (中/英/日)。
- **持久化**: 使用 LocalStorage 儲存語言設定、音效偏好及抽獎歷史。

---

## 🏗️ 建築師的思維：乾淨架構 (Clean Architecture)

我們採用了高度解耦的架構，確保每個部分都各司其職：

1.  **Domain (領域層)**: 定義了抽獎項目的資料型別與模式介面。
2.  **Infrastructure (基礎設施層)**: 包含 `audio.ts` (音效)、`confetti.ts` (特效) 及 `LanguageContext.tsx` (語系)。
3.  **Components (組件層)**:
    -   `App.tsx` 作為 **App Shell**，管理核心狀態。
    -   `InputPanel` (輸入) 與 `ResultOverlay` (結果) 是所有模式共享的「插床」。
    -   `modes/` 目錄下的各個組件則是獨立的「遊戲磁片」，插入 App 即可運作。

### 為什麼這樣設計？
透過這種設計，如果你明天想新增一個「丟硬幣」模式，你只需要在 `modes/` 下寫一個新的組件，而完全不需要動到輸入框或彈窗的邏輯。

---

## 🎨 視覺與互動的堅持 (UI/UX Excellence)

我們不滿足於「能用」，我們追求「心動」：
-   **Glassmorphism**: 使用 `backdrop-filter` 營造出通透的玻璃質感，讓背景的霓虹光影若隱若現。
-   **物理模擬**: 在「轉盤」中實作了摩擦力與加速度的物理效果，而不僅僅是隨機數字。
-   **微互動**: 抽卡時的翻轉、刮獎時的沙沙聲、中獎時噴灑的彩帶，這些細節構成了沉浸感。

---

## 💡 我學到了什麼？(Key Learnings)

1.  **Canvas 與 Interaction 的融合**: 在「刮刮樂」模式中，我們利用 `destination-out` 的混合模式實作了擦除效果，並透過像素掃描來判斷刮除進度。這教會了我如何將傳統繪圖技術轉化為直覺的互動。
2.  **狀態管理的權衡**: 在這個專案中，我們選擇 React Context 而非 Redux，因為語系與音效狀態相對簡單且全域， Context 提供了更輕量的解決方案。
3.  **容錯與穩定性**: 所有涉及 `localStorage` 或 JSON 解析的地方都封裝了 `try-catch`。好的工程師總是假設環境是不穩定的。

---

## ⚠️ 未來陷阱與防範

-   **效能瓶頸**: 當 `items` 數量過多 (例如 500 個) 時，轉盤的 Canvas 渲染可能會變慢。目前我們限制在 50 個以內以保持 60fps。
-   **行動裝置相容性**: 不同瀏覽器對於 `AudioContext` 的自動播放策略不同。我們透過「第一次交互時初始化」來解決這個問題。

## 🌟 結語

程式碼不僅是邏輯的展現，更是生活的導航。希望這份文檔能幫助你理解這台「幸運機器」背後的脈動！
